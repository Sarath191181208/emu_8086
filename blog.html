<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Blog | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://Sarath191181208.github.io/emu_8086/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://Sarath191181208.github.io/emu_8086/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://Sarath191181208.github.io/emu_8086/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | My Site"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/emu_8086/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Sarath191181208.github.io/emu_8086/blog"><link data-rh="true" rel="alternate" href="https://Sarath191181208.github.io/emu_8086/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://Sarath191181208.github.io/emu_8086/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/emu_8086/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/emu_8086/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/emu_8086/assets/css/styles.e5e33878.css">
<link rel="preload" href="/emu_8086/assets/js/runtime~main.b52d7c71.js" as="script">
<link rel="preload" href="/emu_8086/assets/js/main.2fdc035f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/emu_8086/"><div class="navbar__logo"><img src="/emu_8086/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/emu_8086/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/emu_8086/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/emu_8086/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Sarath191181208/emu_8086" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/emu_8086/blog/2023/11/1">Support for memory, reg addressing for 2 operand instructions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/emu_8086/blog/2023/10/31">🛠️ Refactor and Exec of AND</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/emu_8086/blog/2023/10/30">Support for and instruction compilation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/emu_8086/blog/2023/10/29">🛠️ Refactor: moved common logic into a pattern</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/emu_8086/blog/2023/10/28">Blog CI + Indiviaual Byte/Word Indexing work</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Changes this day :"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/emu_8086/blog/2023/11/1">Support for memory, reg addressing for 2 operand instructions</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-01T00:00:00.000Z" itemprop="datePublished">November 1, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/74459981?v=4" alt="Vangipuram Srinivasa Sarath Chandra" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Vangipuram Srinivasa Sarath Chandra</span></a></div><small class="avatar__subtitle" itemprop="description">Tech enthusiast</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Changes this day : </p><ol><li>Added support for memory addressing for 2 operand instructions</li><li>🐞FIX: <code>MOV</code> mem, ax no compiling </li><li>🐞FIX: <code>ADD</code> ax, mem not compiling</li><li>✨ NEW: +compilation of <code>LEA</code> ins</li><li>✨ NEW: +execution of <code>LEA</code> ins</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-for-memory-reg-addressing-for-2-operand-instructions">Support for memory, reg addressing for 2 operand instructions<a href="#support-for-memory-reg-addressing-for-2-operand-instructions" class="hash-link" aria-label="Direct link to Support for memory, reg addressing for 2 operand instructions" title="Direct link to Support for memory, reg addressing for 2 operand instructions">​</a></h2><p>This is an example instruction </p><div class="language-asm6502 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm6502 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    MOV [0x100]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> Bx </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; This was supported</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    MOV [BX+SI]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> AX </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; Previously This wasn&#x27;t supported </span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-mov-mem-ax-no-compiling">🐞FIX: <code>MOV</code> mem, ax no compiling<a href="#fix-mov-mem-ax-no-compiling" class="hash-link" aria-label="Direct link to fix-mov-mem-ax-no-compiling" title="Direct link to fix-mov-mem-ax-no-compiling">​</a></h2><p>The <code>MOV AX, 0x10 + 0x20</code> kind of instructions weren&#x27;t being compiled due to the lexer checking the wrong index for the instruction. This has been fixed in the fowlling way.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                        </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain">low_token </span><span class="token operator" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> address_bytes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">to_vec</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line code-block-removed-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">i </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line code-block-added-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tokenized_line</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">len</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// MOV AX..DI, var</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fix-add-ax-mem-not-compiling">🐞FIX: <code>ADD</code> ax, mem not compiling<a href="#fix-add-ax-mem-not-compiling" class="hash-link" aria-label="Direct link to fix-add-ax-mem-not-compiling" title="Direct link to fix-add-ax-mem-not-compiling">​</a></h2><p>The <code>ADD AX, [0x100]</code> kind of instructions weren&#x27;t being compiled due to the lexer checking the wrong index for the instruction. This has been fixed in the fowlling way.</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                        </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain">low_token </span><span class="token operator" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> address_bytes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">to_vec</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line code-block-removed-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">i </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line code-block-added-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                </span><span class="token class-name" style="color:rgb(17, 17, 17)">Ok</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tokenized_line</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">len</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// ADD AX..DI, var</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-new-compilation-of-lea-ins">✨ NEW: +compilation of <code>LEA</code> ins<a href="#-new-compilation-of-lea-ins" class="hash-link" aria-label="Direct link to -new-compilation-of-lea-ins" title="Direct link to -new-compilation-of-lea-ins">​</a></h2><p>The <code>LEA</code> instruction is used to load the effective address of the source operand into the destination operand. This instruction is used to put the offset address of the source operand in the destination operand. The destination operand is always a register, and the source operand is always a memory operand. The source operand specifies the address of the data. The LEA instruction is useful for accessing table data and executing table lookup operations.</p><div class="language-asm6502 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm6502 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    LEA AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [0x100] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; AX = 0x100</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    LEA AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX+SI] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; AX = BX + SI</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    LEA AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX+SI+0x100] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; AX = BX + SI + 0x100</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    LEA AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX+SI+0x100+0x200] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; AX = BX + SI + 0x100 + 0x200</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-new-execution-of-lea-ins">✨ NEW: +execution of <code>LEA</code> ins<a href="#-new-execution-of-lea-ins" class="hash-link" aria-label="Direct link to -new-execution-of-lea-ins" title="Direct link to -new-execution-of-lea-ins">​</a></h2><p>The algorithm for the execution of the <code>LEA</code> instruction is as follows:</p><ol><li>Fetch the instruction.</li><li>Decode the instruction to determine the addressing mode of the source operand.</li><li>Calculate the effective address of the source operand.</li><li>Load the effective address into the destination register.</li><li>Store the result in the destination register.</li></ol></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="🛠️ Refactor of common parsing while exec of reg as first ins"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/emu_8086/blog/2023/10/31">🛠️ Refactor and Exec of AND</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-31T00:00:00.000Z" itemprop="datePublished">October 31, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/74459981?v=4" alt="Vangipuram Srinivasa Sarath Chandra" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Vangipuram Srinivasa Sarath Chandra</span></a></div><small class="avatar__subtitle" itemprop="description">Tech enthusiast</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-refactor-of-common-parsing-while-exec-of-reg-as-first-ins">🛠️ Refactor of common parsing while exec of reg as first ins<a href="#️-refactor-of-common-parsing-while-exec-of-reg-as-first-ins" class="hash-link" aria-label="Direct link to 🛠️ Refactor of common parsing while exec of reg as first ins" title="Direct link to 🛠️ Refactor of common parsing while exec of reg as first ins">​</a></h2><p>The logic of register as first instruction is always similar for example
<code>TEST AX, BX</code> -&gt; bytes <!-- -->[ 0x85, 0xD8 ]<!-- -->, <code>ADD AX, BX</code> -&gt; bytes <!-- -->[ 0x01, 0xD8 ]<!-- --> and so on.
while exec 0xD8 is always the register for instructions. Therefore, the logic of parsing the register is common for all the instructions. So, I have refactored the code to make it more readable and maintainable.
The new functions are </p><ul><li><code>consume_bytes_and_parse_8bit_reg_as_first_arg_double_ins</code></li><li><code>consume_bytes_and_parse_16bit_reg_as_first_arg_double_ins</code></li></ul><p>The functions are used in the fowlling ways </p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// For 16bit registers</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">consume_bytes_and_parse_16bit_reg_as_first_arg_double_ins</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    mem</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token closure-params closure-punctuation punctuation" style="color:rgb(153, 76, 195)">|</span><span class="token closure-params">cpu</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token closure-params"> </span><span class="token closure-params operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token closure-params keyword" style="color:rgb(12, 150, 155)">mut</span><span class="token closure-params"> </span><span class="token closure-params constant" style="color:rgb(72, 118, 214)">CPU</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token closure-params"> val1</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token closure-params"> </span><span class="token closure-params keyword" style="color:rgb(12, 150, 155)">u16</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token closure-params"> val2</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token closure-params"> </span><span class="token closure-params keyword" style="color:rgb(12, 150, 155)">u16</span><span class="token closure-params closure-punctuation punctuation" style="color:rgb(153, 76, 195)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token keyword" style="color:rgb(12, 150, 155)">u16</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> val1 </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> val2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        cpu</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">set_test_ins_flags_from_16bit_res</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">res</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token class-name" style="color:rgb(17, 17, 17)">None</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// For 8bit registers</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> exec_fn </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token closure-params closure-punctuation punctuation" style="color:rgb(153, 76, 195)">|</span><span class="token closure-params">cpu</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token closure-params"> </span><span class="token closure-params operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token closure-params keyword" style="color:rgb(12, 150, 155)">mut</span><span class="token closure-params"> </span><span class="token closure-params constant" style="color:rgb(72, 118, 214)">CPU</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token closure-params"> val1</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token closure-params"> </span><span class="token closure-params keyword" style="color:rgb(12, 150, 155)">u8</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token closure-params"> val2</span><span class="token closure-params punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token closure-params"> </span><span class="token closure-params keyword" style="color:rgb(12, 150, 155)">u8</span><span class="token closure-params closure-punctuation punctuation" style="color:rgb(153, 76, 195)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Option</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token keyword" style="color:rgb(12, 150, 155)">u8</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> val1 </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> val2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    cpu</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">set_test_ins_flags_from_8bit_res</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">res</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token class-name" style="color:rgb(17, 17, 17)">None</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">consume_bytes_and_parse_8bit_reg_as_first_arg_double_ins</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">mem</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> exec_fn</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution-of-and-instruction">Execution of <code>AND</code> instruction<a href="#execution-of-and-instruction" class="hash-link" aria-label="Direct link to execution-of-and-instruction" title="Direct link to execution-of-and-instruction">​</a></h2><p>The <code>AND</code> instruction is executed in the following way</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// For 16bit registers</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> op1 </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> op2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">carry_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">overflow_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">zero_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">negative_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0x8000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">pairity_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">res </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0xFF</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">count_ones</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// For 8bit registers</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> op1 </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> op2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">carry_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">overflow_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">zero_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">negative_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0x80</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">pairity_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">count_ones</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="The AND instruction is now compiled and working. The AND instruction is a bitwise AND operation. The AND instruction is used to perform a bitwise AND operation between the first source operand (register or memory location) and the second source operand (register or memory location) and store the result in the destination operand (register or memory location). The AND instruction affects the CF and OF flags when the second operand is an immediate value. The SF, ZF, and PF flags are always set according to the result. The state of the AF flag is undefined."><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/emu_8086/blog/2023/10/30">Support for and instruction compilation</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-30T00:00:00.000Z" itemprop="datePublished">October 30, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/74459981?v=4" alt="Vangipuram Srinivasa Sarath Chandra" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Vangipuram Srinivasa Sarath Chandra</span></a></div><small class="avatar__subtitle" itemprop="description">Tech enthusiast</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>The <code>AND</code> instruction is now compiled and working. The <code>AND</code> instruction is a bitwise AND operation. The <code>AND</code> instruction is used to perform a bitwise AND operation between the first source operand (register or memory location) and the second source operand (register or memory location) and store the result in the destination operand (register or memory location). The <code>AND</code> instruction affects the CF and OF flags when the second operand is an immediate value. The SF, ZF, and PF flags are always set according to the result. The state of the AF flag is undefined.
The compilation table of the <code>AND</code> instruction is as follows:</p><table><thead><tr><th align="center">Operand</th><th align="center">Opcode</th><th align="center">Size(bytes)</th><th align="center">Description</th><th>Example instruction</th></tr></thead><tbody><tr><td align="center">reg16, reg16</td><td align="center">0x21</td><td align="center">2</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND AX, BX</td></tr><tr><td align="center">reg8, reg8</td><td align="center">0x20</td><td align="center">2</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND AL, BL</td></tr><tr><td align="center">reg16, mem16</td><td align="center">0x23</td><td align="center">2</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND AX, <!-- -->[BX]</td></tr><tr><td align="center">reg8, mem8</td><td align="center">0x22</td><td align="center">2</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND AL, <!-- -->[BX]</td></tr><tr><td align="center">mem16, reg16</td><td align="center">0x23</td><td align="center">2</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND <!-- -->[BX]<!-- -->, AX</td></tr><tr><td align="center">mem8, reg8</td><td align="center">0x22</td><td align="center">2</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND <!-- -->[BX]<!-- -->, AL</td></tr><tr><td align="center">reg16, imm16</td><td align="center">0x81 0x20</td><td align="center">3</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND AX, 0x0001</td></tr><tr><td align="center">reg8, imm8</td><td align="center">0x80 0x20</td><td align="center">3</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND AL, 0x01</td></tr><tr><td align="center">mem16, imm16</td><td align="center">0x81 0x20</td><td align="center">3</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND <!-- -->[BX]<!-- -->, 0x0001</td></tr><tr><td align="center">mem8, imm8</td><td align="center">0x80 0x20</td><td align="center">3</td><td align="center">Performs bitwise AND operation between the two operands and stores the result in the first operand</td><td>AND <!-- -->[BX]<!-- -->, 0x01</td></tr></tbody></table></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="For instruction like TEST, AND, MOV, ADD ... etc. All of these follow a single pattern for their compliation step example"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/emu_8086/blog/2023/10/29">🛠️ Refactor: moved common logic into a pattern</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-29T00:00:00.000Z" itemprop="datePublished">October 29, 2023</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/74459981?v=4" alt="Vangipuram Srinivasa Sarath Chandra" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Vangipuram Srinivasa Sarath Chandra</span></a></div><small class="avatar__subtitle" itemprop="description">Tech enthusiast</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>For instruction like <code>TEST</code>, <code>AND</code>, <code>MOV</code>, <code>ADD</code> ... etc. All of these follow a single pattern for their compliation step example </p><div class="language-asm6502 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm6502 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">MOV AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> BX </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x8B 0xC3 </span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">TEST AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> BX </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x85 0xC3 </span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">MOV AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x8B 0x07</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">TEST AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x85 0x07</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">MOV AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX+SI] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x8B 0x00</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">TEST AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX+SI] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x85 0x00</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">MOV AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX+SI+0x1234] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x8B 0x84 0x34 0x12</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">TEST AX</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> [BX+SI+0x1234] </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; 0x85 0x84 0x34 0x12</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here 0x8B is the root ins (or) in other words MOV and 0xC3 represents the registers.
All of these instructions fowllow this pattern therefore the logic is sent into a sperate file called <code>src-tauri\src\compiler\parsers\pattern_extractors\compile_first_ins_reg_pattern.rs</code> and the functions are as follows </p><ul><li><code>parse_8bitreg_first_addr_mode</code></li><li><code>parse_16bitreg_first_addr_mode</code></li></ul></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Blog CI"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/emu_8086/blog/2023/10/28">Blog CI + Indiviaual Byte/Word Indexing work</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-28T00:00:00.000Z" itemprop="datePublished">October 28, 2023</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/74459981?v=4" alt="Vangipuram Srinivasa Sarath Chandra" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Vangipuram Srinivasa Sarath Chandra</span></a></div><small class="avatar__subtitle" itemprop="description">Tech enthusiast</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blog-ci">Blog CI<a href="#blog-ci" class="hash-link" aria-label="Direct link to Blog CI" title="Direct link to Blog CI">​</a></h2><p>Made the <code>docusaurus</code> compile in the CI/CD pipeline of github actions and made the <code>docusaurus</code> build and deploy to the <code>gh-pages</code> branch of the repository. The <code>gh-pages</code> branch is used to host the website on github pages.
The website is hosted at <a href="https://sarath191181208.github.io/" target="_blank" rel="noopener noreferrer">https://sarath191181208.github.io/</a>
Issues faced:</p><ol><li>The docusaurus build was working, but the blog dates were wrong this is due to the fact that we are using DD-MM-YYYY format in the blog posts and the docusaurus is parsing these dates as UTC+5:30(my local timezone) and converting it into UTC+00:00 This resulted in blogs having 1-day offset errors. This can be fixed by using the YYYY-MM-DD format which the docusaurus treats it as UTC+00:00 format thus not messing up the dates.</li><li>The github workflow file was having the publish_dir as <code>./build</code> it was actually <code>./docusaurus/build</code>, we are using working-directory in the yml but it isn&#x27;t picked up by the action of actions-gh-pages. This was fixed by changing the publish_dir to <code>./docusaurus/build</code></li></ol><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token key atrule">defaults</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">working-directory</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> ./docusaurus</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">########################</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">#### workflow config ###</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">########################</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Deploy to GitHub Pages</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain">gh</span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain">pages@v3</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">   </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">github_token</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line code-block-removed-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">publish_dir</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> ./build</span></span><br></span><span class="token-line code-block-added-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">publish_dir</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> ./docusaurus/build</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="individual-byteword-indexing">Individual Byte/Word Indexing<a href="#individual-byteword-indexing" class="hash-link" aria-label="Direct link to Individual Byte/Word Indexing" title="Direct link to Individual Byte/Word Indexing">​</a></h2><p>The syntax like using <code>w.[]</code> and <code>b.[]</code> are now working. We can use of the fowlling syntax to make the fowlling work.</p><div class="language-asm6502 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm6502 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">ORG 100h</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">.DATA</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  var dw 0x100</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">CODE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  MOV w.[var]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> 0x10 </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; moves 0x0010 -&gt; [var]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  MOV b.[var]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> 0x10 </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; moves 0x10   -&gt; [var]</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-of-test-instruction">Compilation of TEST instruction<a href="#compilation-of-test-instruction" class="hash-link" aria-label="Direct link to Compilation of TEST instruction" title="Direct link to Compilation of TEST instruction">​</a></h2><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>What the differnet texts mean in opcode</div><div class="admonitionContent_S0QG"><ul><li><p><code>[0x00 0x10]</code> means that these bytes are derived from memory and address 0x100 is used.</p></li><li><p><code>u8</code> means that the byte is derived from the immediate value and has 1byte as size.</p></li><li><p><code>u16</code> means that the word is derived from the immediate value and has 2bytes as size.</p></li><li><p><code>i8</code> means that the byte is derived from the immediate value is signed and has 1byte size.</p></li><li><p><code>i16</code> means that the word is derived from the immediate value is signed and has 2byte size.</p></li><li><p><code>0x00..0xFF</code> means that these bytes are derived from the instructions/registers.</p></li><li><p><code>reg16</code> means that the register is 16-bit. Ex: <code>AX</code>, <code>BX</code>, <code>CX</code>, <code>DX</code>, <code>SP</code>, <code>BP</code>, <code>SI</code>, <code>DI</code></p></li><li><p><code>reg8</code> means that the register is 8-bit. Ex: <code>AL</code>, <code>BL</code>, <code>CL</code>, <code>DL</code>, <code>AH</code>, <code>BH</code>, <code>CH</code>, <code>DH</code></p></li><li><p><code>var16</code> means that the variable is 16-bit. Ex: <code>var dw 0x100</code> or <code>w.[0x100]</code></p></li><li><p><code>var8</code> means that the variable is 8-bit. Ex: <code>var db 0x100</code> or <code>b.[0x100]</code></p></li><li><p><code>idx16</code> means that the index is 16-bit. Ex: <code>w.[BX]</code> or <code>w.[SI]</code> or <code>w.[DI]</code></p></li><li><p><code>idx8</code> means that the index is 8-bit. Ex: <code>b.[BX]</code> or <code>b.[SI]</code> or <code>b.[DI]</code></p></li></ul></div></div><p>The <code>TEST</code> instruction is now compiled and working. The <code>TEST</code> instruction is used to perform bitwise AND operation on the operands and set the flags accordingly. The <code>TEST</code> instruction is compiled into the following code.</p><table><thead><tr><th align="center">Operand</th><th align="center">Opcode</th><th align="center">Size(bytes)</th><th align="center">Description</th><th>Example instruction</th></tr></thead><tbody><tr><td align="center">reg16, reg16</td><td align="center">0x85 0xC0..0xFF</td><td align="center">2</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AX, BX</code></td></tr><tr><td align="center">reg8, reg8</td><td align="center">0x84 0xC0..0xFF</td><td align="center">2</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AL, BL</code></td></tr><tr><td align="center">AX, imm16</td><td align="center">0xA9 0xC0..0xFF</td><td align="center">3</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AX, 0x10</code></td></tr><tr><td align="center">AL, imm8</td><td align="center">0xA8 0xC0..0xFF</td><td align="center">2</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AL, 0x10</code></td></tr><tr><td align="center">reg16, imm16/imm8</td><td align="center">0xF7 0xC0..0xFF u16</td><td align="center">4</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AX, 0x10</code></td></tr><tr><td align="center">reg8, imm8</td><td align="center">0xF6 0xC0..0xFF u8</td><td align="center">3</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AL, 0x10</code></td></tr><tr><td align="center">var16/reg16 , reg16/var16</td><td align="center">0x85 0x06..0x36 <!-- -->[0x02 0x01]</td><td align="center">4</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST [0x100], AX</code></td></tr><tr><td align="center">var8/reg8 , reg8/var8</td><td align="center">0x84 0x06..0x36 <!-- -->[0x02 0x01]</td><td align="center">4</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST [0x100], AL</code></td></tr><tr><td align="center">var16, imm16/imm8</td><td align="center">0xF7 0x06 <!-- -->[0x00 0x10]<!-- --> u16</td><td align="center">6</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST [0x100], 0x10</code></td></tr><tr><td align="center">var8, imm8</td><td align="center">0xF6 0x06 <!-- -->[0x00 0x10]<!-- --> u8</td><td align="center">5</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST [0x100], 0x10</code></td></tr><tr><td align="center">reg16, idx16</td><td align="center">0x85 0x00..0x30</td><td align="center">2</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AX, [BX]</code></td></tr><tr><td align="center">reg16, idx16+imm8</td><td align="center">0x85 0x40..0x70 i8</td><td align="center">3</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AX, [BX+0x10]</code></td></tr><tr><td align="center">reg16, idx16+imm16</td><td align="center">0x85 0x80..0xB0 i16</td><td align="center">4</td><td align="center">Performs bitwise AND operation on the operands and set the flags accordingly</td><td><code>TEST AX, [BX+0x1000]</code></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution-of-the-test-instruction">Execution of the test instruction<a href="#execution-of-the-test-instruction" class="hash-link" aria-label="Direct link to Execution of the test instruction" title="Direct link to Execution of the test instruction">​</a></h2><p>Made the <code>TEST</code> instruction execute and set the flags accordingly. The result isn&#x27;t stored anywhere, only the flags are chaged.
Algorithm</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// For 16-bit operands</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> op1 </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> op2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">carry_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">overflow_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">zero_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">negative_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0x8000</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">pairity_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">count_ones</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">// For 8-bit operands</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> op1 </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> op2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">carry_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">overflow_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">zero_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">negative_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0x80</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">pairity_flag </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">count_ones</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-deprecation-of-functions">Testing deprecation of functions<a href="#testing-deprecation-of-functions" class="hash-link" aria-label="Direct link to Testing deprecation of functions" title="Direct link to Testing deprecation of functions">​</a></h2><p>Some of the old functions which don&#x27;t use best practices are deprecated and the new functions are used.
The functions which are deprecated are:</p><ul><li><code>generate_test</code> macro</li><li><code>generate_test_with_cycles</code> macro </li><li><code>compile_and_test_str</code> function</li></ul><p>In favour of these convoluted function a new api is created for testing. It is both easy and simple to use. The new api is as follows:</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> code </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;MOV AX, BX&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> num_cycles </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">run_code</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">code</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> num_cycles</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="🛠️ Refactor conditional check of variable type into the evaluate_ins function And added ByteIndexedAddressing in Assembly8086Tokens"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/emu_8086/blog/2023/10/27/ Refactor">🛠️ Refactor</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-27T00:00:00.000Z" itemprop="datePublished">October 27, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/74459981?v=4" alt="Vangipuram Srinivasa Sarath Chandra" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Vangipuram Srinivasa Sarath Chandra</span></a></div><small class="avatar__subtitle" itemprop="description">Tech enthusiast</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>🛠️ Refactor conditional check of variable type into the evaluate_ins function And added ByteIndexedAddressing in Assembly8086Tokens</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="refactor-conditional-check">Refactor conditional check<a href="#refactor-conditional-check" class="hash-link" aria-label="Direct link to Refactor conditional check" title="Direct link to Refactor conditional check">​</a></h2><ul><li>Refactored conditional check of variable type into the evaluate_ins function
The code base was having this type of conditional checks for checking if the variable type is defined as Word (or) as byte
The fowlling is the example of what I am talking about:</li></ul><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockTitle_Ktv7">./src-tauri/src/compiler/parsers/mov.rs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> mov_ins </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">is_variable_defined_as_16bit</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain">variable_abs_offset_map</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">get_token_as_label</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token plain">high_token</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token number" style="color:rgb(170, 9, 130)">0xC7</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token number" style="color:rgb(170, 9, 130)">0xC6</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is a repetative logic and we can mess up quite easily therefore we have refactored this into the evaluate_ins function the following is the example of the same:</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockTitle_Ktv7">./src-tauri/src/compiler/parsers/pattern_extractors/utils.rs 181:5</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> var_type </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> variable_abs_address_map</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">label</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">unwrap_or</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token operator" style="color:rgb(12, 150, 155)">&amp;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token class-name" style="color:rgb(17, 17, 17)">VariableType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Word</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">variable_type </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Some</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">var_type</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="removal-of-parsing-chracter-in-parse-fn-and-moved-it-into-evaluate-ins">Removal of parsing chracter in parse fn and moved it into evaluate ins<a href="#removal-of-parsing-chracter-in-parse-fn-and-moved-it-into-evaluate-ins" class="hash-link" aria-label="Direct link to Removal of parsing chracter in parse fn and moved it into evaluate ins" title="Direct link to Removal of parsing chracter in parse fn and moved it into evaluate ins">​</a></h2><p>The <code>parse_two_arguments_line</code> was incharge of handing the substitution of variables and labels into their respective addresses and values. This intrun created a lot of duplicated logic and was getting hard to maintain. Thus, this logic has now been moved into the <code>evaluate_ins</code> function which is now incharge of handlig the substitution of variables and labels into their respective addresses and values.</p><p>This is what the <code>parse_two_arguments_line</code> was doing before: </p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:rgb(12, 150, 155)">match</span><span class="token plain"> high_token</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">match</span><span class="token plain"> low_token</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token class-name" style="color:rgb(17, 17, 17)">Assembly8086Tokens</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Character</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">label</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> addr_bytes_or_num </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">get_label_address_or_push_into_ref</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token keyword" style="color:rgb(12, 150, 155)">match</span><span class="token plain"> addr_bytes_or_num</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                bytes </span><span class="token operator" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">AddressingMode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">RegisterAndAddress</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">                num </span><span class="token operator" style="color:rgb(12, 150, 155)">=&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">AddressingMode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">::</span><span class="token class-name" style="color:rgb(17, 17, 17)">Registers16bitNumber</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This logic has now been converted into the <code>evaluate_ins</code> fn where it is already being done.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="addition-of-byteindexedaddressing-in-assembly8086tokens">Addition of ByteIndexedAddressing in Assembly8086Tokens<a href="#addition-of-byteindexedaddressing-in-assembly8086tokens" class="hash-link" aria-label="Direct link to Addition of ByteIndexedAddressing in Assembly8086Tokens" title="Direct link to Addition of ByteIndexedAddressing in Assembly8086Tokens">​</a></h2><p>I have recently known that there exists ByteIndexedAddressing in the 8086 processor, it is a mode where you can change/access byte of the memory like when defining the variable as byte. You can also do this in a differnent way therefore to merge all of the uses into a sinlge entity to represent and match easily I have added ByteIndexedAddressing in Assembly8086Tokens. The following is the example of the same:</p><p>My discovery: </p><div class="language-asm6502 codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-asm6502 codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">MOV b.[BX]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> 0x0A </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; moves 0x0A into the byte of the memory pointed by BX</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">MOV w.[BX]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> 0x0A </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">; moves 0x00_0A into the word of the memory pointed by BX</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As this is the case to represent both <code>b.[BX]</code> and <code>var db</code> I have added ByteIndexedAddressing in Assembly8086Tokens.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-doc--setup-github-actions-to-automatically-deploy-docs">📖 DOC:  Setup github actions to automatically deploy docs<a href="#-doc--setup-github-actions-to-automatically-deploy-docs" class="hash-link" aria-label="Direct link to 📖 DOC:  Setup github actions to automatically deploy docs" title="Direct link to 📖 DOC:  Setup github actions to automatically deploy docs">​</a></h2><p>From <a href="https://docusaurus.io/docs/deployment#deploying-to-github-pages" target="_blank" rel="noopener noreferrer">Docusaurus</a> docs:
We have setup a github actions script that looks like this </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Build Docs</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token key atrule">defaults</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">working-directory</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> ./docusaurus</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;main&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;docusaurus/**&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule">pull_request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;main&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;docusaurus/**&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token key atrule">permissions</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule">contents</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> write</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule">deploy</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Deploy to GitHub Pages</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain">latest</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> actions/checkout@v3</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain">node@v3</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          </span><span class="token key atrule">node-version</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">18</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">          </span><span class="token key atrule">cache</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> npm </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Install dependencies</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> npm ci</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Build</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> npm run build</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Deploy to GitHub Pages</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain">gh</span><span class="token punctuation" style="color:rgb(153, 76, 195)">-</span><span class="token plain">pages@v3</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token key atrule">github_token</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token key atrule">publish_dir</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> ./build</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token key atrule">user_name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Sarath19181208</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">bot</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#403f53"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            </span><span class="token key atrule">user_email</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> vssarathc04+gh_bot_emu8086@gmail.com</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To make automatically deploy docs to github pages on every push to main branch.</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Compilation of the pop instruction"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/emu_8086/blog/2023/10/26/ Added POP support">Pop Support</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-26T00:00:00.000Z" itemprop="datePublished">October 26, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/74459981?v=4" alt="Vangipuram Srinivasa Sarath Chandra" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Sarath191181208" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Vangipuram Srinivasa Sarath Chandra</span></a></div><small class="avatar__subtitle" itemprop="description">Tech enthusiast</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compilation-of-the-pop-instruction">Compilation of the pop instruction<a href="#compilation-of-the-pop-instruction" class="hash-link" aria-label="Direct link to Compilation of the pop instruction" title="Direct link to Compilation of the pop instruction">​</a></h2><table><thead><tr><th align="center">Operand</th><th align="center">Opcode</th><th align="center">Description</th><th align="center">Example instruction</th></tr></thead><tbody><tr><td align="center">reg16</td><td align="center">0x58+rw</td><td align="center">Pop top of stack into reg16</td><td align="center"><code>pop ax</code></td></tr><tr><td align="center">mem16</td><td align="center">0x8F 0x06 16BIT-addr</td><td align="center">Pop top of stack into mem16</td><td align="center"><code>pop [0x0100]</code></td></tr><tr><td align="center">indexed with no offset</td><td align="center">0x8F 0x00..0x07</td><td align="center">Pop top of stack into index given by regs</td><td align="center"><code>pop [bx+si]</code></td></tr><tr><td align="center">indexed with byte offset</td><td align="center">0x8F 0x40..0x47 16bit-addr</td><td align="center">Pop top of stack into index given by regs + byte offset</td><td align="center"><code>pop [bx+0x01]</code></td></tr><tr><td align="center">indexed with word offset</td><td align="center">0x8F 0x80..0x87 16bit-addr</td><td align="center">Pop top of stack into index given by regs + word offset</td><td align="center"><code>pop [bx+0x0100]</code></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution-of-the-pop-instruction">Execution of the pop instruction<a href="#execution-of-the-pop-instruction" class="hash-link" aria-label="Direct link to Execution of the pop instruction" title="Direct link to Execution of the pop instruction">​</a></h2><p>Made the <code>pop</code> instruction execution working.
Addressing modes of the <code>pop</code> instruction implemented are:</p><ul><li>Register addressing mode, ex - <code>pop ax</code></li><li>Direct addressing mode, ex - <code>pop [0x1234]</code></li><li>Variable addressing mode, ex - <code>pop [var]</code></li><li>Indirect addressing mode, ex - <code>pop [bx]</code></li><li>Indexed addressing mode, ex - <code>pop [bx+si]</code></li></ul><p>Algorithm:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">operand = SS:[SP] (top of the stack)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">SP = SP + 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/emu_8086/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/emu_8086/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Sarath191181208/emu_8086" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/emu_8086/assets/js/runtime~main.b52d7c71.js"></script>
<script src="/emu_8086/assets/js/main.2fdc035f.js"></script>
</body>
</html>